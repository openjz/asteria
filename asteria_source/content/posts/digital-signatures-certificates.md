---
title: "数字签名和数字证书"
date: 2022-06-18T14:28:00+08:00
# bookComments: false
# bookSearchExclude: false
tags :
- "信息安全"
categories : 
- "编程"
---

## 一、数字签名

数字签名的作用是保证数据的完整性和保密性

数据完整性通过对数据做摘要保证

数据的保密性通过对数据和摘要做公钥加密保证，接收人只能用发送人提供的公钥才能解密消息，用其他人提供的公钥无法解密消息

具体的交互流程是

1. 发送人对消息做加密和摘要，生成数字签名和加密信息，并将签名和信息一起发送给接收人
2. 接收人收到消息后，使用发送人的公钥校验数字签名，校验通过后，即可证明消息的完整性
3. 接收人对消息进行解密，查看消息，对消息做出答复，并用发送人的公钥对答复加密，回复给发送人

## 二、数字证书

在使用数字签名的过程中存在一个问题，即接收人无法判断发送人的公钥是否可信，换言之，发送人提供的公钥有可能被篡改或伪造。数字证书就是为了解决公钥的可信性问题而被发明出来的。

具体的做法是，由一个权威的证书颁发机构（CA）使用它自己的公钥对发送人的公钥做一个数字签名，并将这个数字签名作为证书颁发给发送人，发送人给接收人发送消息时，将证书一并附上，由接收人去验证。CA会为其自己的公钥颁发一个根证书，提前提供给用户，用户从根证书中获取到CA的公钥，对CA颁发的证书进行验证。

简单来说，用户先从根证书中拿到CA的公钥，再利用CA的公钥从服务器证书中拿到服务器的公钥，然后再用服务器公钥和服务器通信。

## 三、https协议

### https和http的区别

1. https在http的基础上增加了SSL/TLS协议，SSL/TLS依靠证书验证服务器身份，并对浏览器和服务器之间的通信进行加密
2. https使用443端口，http使用80端口

### SSL/TLS

- SSL，Secure Sockets Layer
- TLS，Transport Layer Security
- SSL/TLS是对因特网上的数据传输进行身份验证和加密的协议，SSL/TLS是对ssl和tls的统称，tls更先进，更安全的ssl，正在逐渐取代ssl
- SSL/TLS有多个版本，使用[How’s My SSL](https://www.howsmyssl.com/)工具查看你的浏览器使用的是哪个SSL/TLS版本
- SSL/TLS的握手过程
    1. 客户端和服务器互相告知各自支持的SSL/TLS版本，加密算法和压缩算法
    2. 客户端验证服务器证书，并获得服务器公钥
    3. 双方通过协商生成会话秘钥（会话秘钥是一个对称秘钥，对称加密比公钥加密快）
    4. 双方使用会话秘钥进行加密通信


