# c++ STL使用技巧


## 参考

- 《C++ Primer 第5版》

## 1. 容器类型

- 顺序容器
    - 连续内存
        - vector
        - deque：双端队列
        - array：固定大小
        - string
    - 链表
        - list：双向链表
        - forward_list：单向链表
    - 顺序容器适配器
        - stack
        - queue
        - priority_queue：堆

## 2. 和容器大小有关的操作

- 大小
    - `empty`
    - `size`
    - `max_size`：返回该类型容器能容纳的最大元素数量
    - `resize`：改变容器大小
- 容量
    - `capacity`：返回容器的容量，即不重新分配内存的情况下，容器最多能保存的元素
    - `reserve`：不改变容器大小，改变容器的容量（只能扩大，不能缩小）
    - `shrink_to_fit`：将容量缩小到和大小一致

## 3. 内存操作

- assign：内存拷贝
- swap：内存交换

## 4. 添加和删除元素会导致容器迭代器失效

常见面试排错题

如果在遍历容器的过程中insert和earse，需要在操作完后更新迭代器，保证迭代器的有效性

## 5. vector对象是如何增长的

vector预先分配的容量（capacity）会比size大一些，当capacity不足时，会发生扩容

## 6. 函数适配器bind

在下面这个例子中，g是一个可调用对象，f是被适配的函数

_1和_2代表g只有两个参数，_1对应g的第一个参数，_2对应g的第二个参数

a,b,_2,c,_1分别对应函数f的第一、二、三、四、五个参数

即，调用 `g(_1,_2)` 会转换为 `f(a, b, _2, c, _1)`

```cpp
auto g = bind(f, a, b, _2, c, _1);
```

名字 `_n` 定义在 `std::placeholders` 中，例如 `std::placeholders::_1`

## 7. 五类迭代器

算法所要求的迭代器操作可以分为5个迭代器类别，每个算法都会对它的每个迭代器参数指明须提供哪类迭代器。

* **输入迭代器**：只读，不写；单遍扫描，只能递增。  
例如，`istream_iterator`是一种输入迭代器。
* **输出迭代器**：只写，不读；单遍扫描，只能递增。  
例如：`ostream_iterator`是一种输出迭代器。
* **前向迭代器**：可读写，多遍扫描，只能递增。  
`forward_list`上的迭代器是前向迭代器。
* **双向迭代器**：可读写，多遍扫描，可递增递减。  
除了`forward_list`外，其他标准库都提供双向迭代器。
* **随机访问迭代器**：可读写，多遍扫描，支持全部迭代器运算。  
`array`、`deque`、`string`、`vector`的迭代器都是随机访问迭代器。  
注意：只有顺序容器才有随机访问迭代器，只有顺序容器才能用下标访问元素。顺序容器本身和顺序容器的迭代器都有下标运算符`"[]"`。（见书中第310页和第367页）

**一个高层类别的迭代器支持低层类别迭代器的所有操作**。C++标准指明了泛型和数值算法的每个迭代器参数的最小类别。
