
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://blog.shiwj.com/graphics/games101/75.games101-1-transform-rasterization/">
      
      
        <link rel="prev" href="../../33.rendering-pipeline/">
      
      
        <link rel="next" href="../games101-2-shading/">
      
      
      <link rel="icon" href="../../../img/avatar.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>games101 一、变换和光栅化 - Asteria</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transform" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Asteria" class="md-header__button md-logo" aria-label="Asteria" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.45 4.73L5.82 21z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Asteria
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              games101 一、变换和光栅化
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/openjz/asteria" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../foundation/11.z2.go-gopl/" class="md-tabs__link">
          
  
  
  Foundation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../front-end/10.js-mdn-tutorial/" class="md-tabs__link">
          
  
  
  Front end

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../32.unity-webgl-deploy/" class="md-tabs__link">
          
  
  
  Graphics

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../interview/16.interview-bagu-golang/" class="md-tabs__link">
          
  
  
  Interview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux/41.linux-so-dynamic-load/" class="md-tabs__link">
          
  
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/15.remainder-and-modulo/" class="md-tabs__link">
          
  
  
  Math

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../multi-media/58.build_obs/" class="md-tabs__link">
          
  
  
  Multi media

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../others/11.z3.time/" class="md-tabs__link">
          
  
  
  Others

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tools/38.bluetooth-tools/" class="md-tabs__link">
          
  
  
  Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../windows/35.windows-devices-manage/" class="md-tabs__link">
          
  
  
  Windows

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Asteria" class="md-nav__button md-logo" aria-label="Asteria" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.45 4.73L5.82 21z"/></svg>

    </a>
    Asteria
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/openjz/asteria" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Foundation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Foundation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/11.z2.go-gopl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    golang入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/50.php-install-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    php安装和配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/72.clrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《算法导论第3版》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/73.asemblly-wangshuang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《汇编语言第4版（王爽）》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Code design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/code-design/51.closure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    闭包
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/code-design/70.design-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《设计模式》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concurrent programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Concurrent programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/concurrent-programming/30.coroutine-stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    有栈协程和无栈协程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/concurrent-programming/37.condition-variable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    条件变量
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/concurrent-programming/71.lockfree-ringbuffer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    无锁环形Buffer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cpp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Cpp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/20.cpp-stl-algorithm-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++标准库算法概览
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/23.cpp-new-malloc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中new和malloc的区别
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/24.cpp-static/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中的static
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/25.cpp-dup-symbols/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中符号重定义问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/26.cpp-copy-move/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中的拷贝和移动语义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/27.cpp-const/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中的const
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/28.cpp-inline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于C++ inline关键字
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/29.cpp-forward-declaration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于C++前向声明
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/57.effective-cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《Effective C++ 第三版》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/62.effective-modern-cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《Effective Modern C++》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/65.cpp-template-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++模板使用技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/66.cpp-stl-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++ STL使用技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/67.cpp-operator-overloading-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++ 运算符重载使用技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/68.cpp-memory-analysis-asan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++内存分析：ASan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/69.cpp-memory-analysis-vld/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++内存分析：VLD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/database/11.z1.mysql-crash-course/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/database/13.mysql-complex-sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql中的复杂查询
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/network/12.z1.ip-address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于IP地址的发展
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Os
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            Os
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/os/14.threadexit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线程什么时候终止
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/os/74.csapp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《深入理解计算机系统第3版》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Front end
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Front end
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/10.js-mdn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    js入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/11.css-mdn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    css入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/17.html-mdn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    html入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/18.webpage-print/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    打印html页面
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Graphics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Graphics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../32.unity-webgl-deploy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如何部署unity生成的WebGL包
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../33.rendering-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    渲染管线介绍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Games101
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Games101
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    games101 一、变换和光栅化
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    games101 一、变换和光栅化
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#transform" class="md-nav__link">
    <span class="md-ellipsis">
      变换（Transform）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="变换（Transform）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotate" class="md-nav__link">
    <span class="md-ellipsis">
      旋转（Rotate）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shear" class="md-nav__link">
    <span class="md-ellipsis">
      切变（Shear）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#homogeneous-coordinatesaffine-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      齐次坐标（Homogeneous Coordinates）和仿射变换（Affine Transformation）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3维变换
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3维旋转
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      欧拉角
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gimbal-lock" class="md-nav__link">
    <span class="md-ellipsis">
      万向节死锁（Gimbal Lock）问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewing-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      观测变换（Viewing Transformation）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="观测变换（Viewing Transformation）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-camera-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      View / Camera transformation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#projection-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      Projection transformation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orthographic-projection" class="md-nav__link">
    <span class="md-ellipsis">
      正交投影 (Orthographic projection)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-projection" class="md-nav__link">
    <span class="md-ellipsis">
      透视投影 (Perspective projection)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      光栅化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="光栅化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewport-transformation-" class="md-nav__link">
    <span class="md-ellipsis">
      视口变换（Viewport Transformation）：标准立方体坐标-&gt;屏幕坐标
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      光栅化：把多边形绘制到屏幕上，并填满像素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      三角形
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampling" class="md-nav__link">
    <span class="md-ellipsis">
      采样（Sampling）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-aliasing" class="md-nav__link">
    <span class="md-ellipsis">
      抗锯齿/反走样（Anti-aliasing）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="抗锯齿/反走样（Anti-aliasing）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampling-error" class="md-nav__link">
    <span class="md-ellipsis">
      采样错误（Sampling Error）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      模糊：一种抗锯齿方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      为什么会走样/失真
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      滤波
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      怎么滤波
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      从信号的角度分析采样和走样
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      如何降低采样错误
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      通过模糊实现抗锯齿
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msaa-multi-sample-anti-aliasing" class="md-nav__link">
    <span class="md-ellipsis">
      多重采样抗锯齿（MSAA, Multi-Sample Anti-Aliasing）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      其他抗锯齿方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      物体可见性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="物体可见性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#z-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      Z-Buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      透视投影深度矫正
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      插值
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../games101-2-shading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    games101 二、着色
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Interview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/16.interview-bagu-golang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-golang
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/19.interview-bagu-cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-c++
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/52.interview-bagu-general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-通用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/53.interview-bagu-distribute-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-分布式系统
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/41.linux-so-dynamic-load/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux 动态库so文件 动态加载
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/42.linux-jiu-gai-zhe-me-xue-note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《linux就该这么学》笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/43.linux-common-command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux常用命令
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/44.linux-common-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux常用配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/45.linux-net-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux网络配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/47.linux-muti-thread-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux多线程编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/9.linux-core-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux core dump配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Math
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/15.remainder-and-modulo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    取余和取模的区别
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/31.linear-algebra-3B1B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性代数的几何意义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/63.affine-transformation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    理解仿射变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/64.calculus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    微积分学习笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Multi media
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Multi media
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multi-media/58.build_obs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    编译obs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multi-media/59.ffmpeg_cmd_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ffmpeg命令行例子
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/11.z3.time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算机中的时间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/12.digital-signatures-certificates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数字签名, 数字证书以及加密通信
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/34.bluetooth-specification-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    蓝牙相关知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/40.bug-record/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些开发过程中遇到的奇怪问题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/38.bluetooth-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    蓝牙调试工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/46.ssh-login-script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ssh登陆脚本
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/60.vscode-continue-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vscode continue AI插件配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/61.understand-scitools-keygen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scientific Toolworks Understand 7.0.x 破解机使用方法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Build
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            Build
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/build/21.makefile-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    makefile笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_6" >
        
          
          <label class="md-nav__link" for="__nav_10_6" id="__nav_10_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_6">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/nginx/48.nginx-getting-started-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nginx入门教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/nginx/49.nginx-install-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nginx安装和配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7" >
        
          
          <label class="md-nav__link" for="__nav_10_7" id="__nav_10_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Package manager
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7">
            <span class="md-nav__icon md-icon"></span>
            Package manager
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/package-manager/22.scl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    scl-rhel/centos软件运行环境
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Windows
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Windows
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/35.windows-devices-manage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    windows设备管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/39.windows-dump-debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    windows下调试dump文件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/54.windows_ifeo_windbg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用IFEO映像劫持+windbg在进程运行过程中调试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/55.winodws_develop_knowledge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些和windows开发相关的小知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/56.char-wchar-on-windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    char和wchar_t在windows上如何正确使用
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#transform" class="md-nav__link">
    <span class="md-ellipsis">
      变换（Transform）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="变换（Transform）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotate" class="md-nav__link">
    <span class="md-ellipsis">
      旋转（Rotate）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shear" class="md-nav__link">
    <span class="md-ellipsis">
      切变（Shear）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#homogeneous-coordinatesaffine-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      齐次坐标（Homogeneous Coordinates）和仿射变换（Affine Transformation）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3维变换
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3维旋转
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      欧拉角
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gimbal-lock" class="md-nav__link">
    <span class="md-ellipsis">
      万向节死锁（Gimbal Lock）问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewing-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      观测变换（Viewing Transformation）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="观测变换（Viewing Transformation）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-camera-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      View / Camera transformation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#projection-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      Projection transformation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orthographic-projection" class="md-nav__link">
    <span class="md-ellipsis">
      正交投影 (Orthographic projection)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-projection" class="md-nav__link">
    <span class="md-ellipsis">
      透视投影 (Perspective projection)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      光栅化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="光栅化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewport-transformation-" class="md-nav__link">
    <span class="md-ellipsis">
      视口变换（Viewport Transformation）：标准立方体坐标-&gt;屏幕坐标
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      光栅化：把多边形绘制到屏幕上，并填满像素
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      三角形
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampling" class="md-nav__link">
    <span class="md-ellipsis">
      采样（Sampling）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anti-aliasing" class="md-nav__link">
    <span class="md-ellipsis">
      抗锯齿/反走样（Anti-aliasing）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="抗锯齿/反走样（Anti-aliasing）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampling-error" class="md-nav__link">
    <span class="md-ellipsis">
      采样错误（Sampling Error）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      模糊：一种抗锯齿方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      为什么会走样/失真
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      滤波
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      怎么滤波
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      从信号的角度分析采样和走样
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      如何降低采样错误
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      通过模糊实现抗锯齿
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msaa-multi-sample-anti-aliasing" class="md-nav__link">
    <span class="md-ellipsis">
      多重采样抗锯齿（MSAA, Multi-Sample Anti-Aliasing）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      其他抗锯齿方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      物体可见性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="物体可见性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#z-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      Z-Buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      透视投影深度矫正
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      插值
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>games101 一、变换和光栅化</h1>

<h2 id="transform">变换（Transform）</h2>
<p>有几种常见的变换</p>
<ul>
<li>缩放（Scale）</li>
<li>翻转（Reflection）</li>
<li>切变（Shear）</li>
<li>旋转（Rotate）</li>
</ul>
<h3 id="rotate">旋转（Rotate）</h3>
<p>旋转矩阵</p>
<div class="arithmatex">\[
\begin{bmatrix}
\cos\theta &amp; -\sin\theta\\
\sin\theta &amp; \cos\theta 
\end{bmatrix}
\]</div>
<p>一个结论：旋转矩阵的逆矩阵等于它的转置矩阵（我们把这样的矩阵称为<strong>正交矩阵</strong>），即</p>
<div class="arithmatex">\[
R^{-1} = R^T
\]</div>
<h3 id="shear">切变（Shear）</h3>
<p>以下是一个x方向上切变的例子（这是一个2维变换）</p>
<pre><code class="language-text">变换前

   ^ y
   |
 1 | +-----+
   | |     |
 0 | +-----+
   +--------------&gt; x

变换后

   ^ y
   |
 1 |    /-----/      ← 顶边向右平移 k
   |   /     /
 0 | +-----/
   +--------------&gt; x
</code></pre>
<p>表示为矩阵乘法：</p>
<div class="arithmatex">\[
\begin{bmatrix}
x'\\
y'
\end{bmatrix}
=
\begin{bmatrix}
1 &amp; a\\
0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
x\\
y
\end{bmatrix}
\]</div>
<h3 id="homogeneous-coordinatesaffine-transformation">齐次坐标（Homogeneous Coordinates）和仿射变换（Affine Transformation）</h3>
<p>（下面以2维变换为例来说明这个问题）</p>
<p><strong>齐次坐标（Homogeneous Coordinates）</strong></p>
<p>齐次坐标的引入是为了解决线性变换无法表示平移的问题，没有齐次坐标的情况下，一个带有平移的变化必须表示为以下形式：</p>
<div class="arithmatex">\[
\vec{y} = A\vec{x} + \vec{b}
\]</div>
<p>展开为：</p>
<div class="arithmatex">\[
\begin{bmatrix}
x'\\
y'
\end{bmatrix}
=
\begin{bmatrix}
a &amp; b\\
c &amp; d
\end{bmatrix}
\begin{bmatrix}
x\\
y
\end{bmatrix}
+
\begin{bmatrix}
t_x\\
t_y
\end{bmatrix}
\]</div>
<p>为了简化表示和计算，我们引入齐次坐标，将二维向量扩展为三维向量：</p>
<ul>
<li>将二维的点 <span class="arithmatex">\((x, y)\)</span> 扩展为 <span class="arithmatex">\((x, y, 1)\)</span></li>
<li>将二维的向量 <span class="arithmatex">\((x, y)\)</span> 扩展为 <span class="arithmatex">\((x, y, 0)\)</span></li>
</ul>
<p>以下是一个利用齐次坐标对一个点做平移变换的例子：</p>
<div class="arithmatex">\[
\begin{pmatrix}
x'\\
y'\\
w'
\end{pmatrix}
=
\begin{pmatrix}
1 &amp; 0 &amp; t_x\\
0 &amp; 1 &amp; t_y\\
0 &amp; 0 &amp; 1
\end{pmatrix}
\begin{pmatrix}
x\\
y\\
1
\end{pmatrix}
=
\begin{pmatrix}
x+t_x\\
y+t_y\\
1
\end{pmatrix}
\]</div>
<p>为什么向量的第三维是0呢？是因为向量具有平移不变性，如果是对一个向量做变换，为了使向量不受平移变换的影响，它的第三维必须是0。</p>
<p>在这个定义下（点的第三维是1，向量的第三维是0），以下这些操作都是有效的：</p>
<ol>
<li>vector + vector = vector</li>
<li>point - point = vector</li>
<li>point + vector = point</li>
<li>point + point = ??</li>
</ol>
<p>对于第四种情况，由于两个点相加后，第三维变成了2，不再符合齐次坐标的定义，因此，人们对这种情况做了扩充，规定：</p>
<div class="arithmatex">\[
\begin{pmatrix}
x\\
y\\
w
\end{pmatrix}
\text{ is the 2D point }
\begin{pmatrix}
x/w\\
y/w\\
1
\end{pmatrix},
\quad w\neq 0
\]</div>
<p>其实就是两个点相加的结果是这两个点的中点</p>
<p>这也意味着，我们对齐次坐标下的一个点的4个维度都乘以一个数k，它和原来的点是同一个点，后面的透视投影会用到这个性质。</p>
<p><strong>仿射变换（Affine Transformation）</strong></p>
<p>上面提到的线性变换+平移（Translation）的组合叫做仿射变换</p>
<div class="arithmatex">\[
\begin{bmatrix}
x'\\
y'
\end{bmatrix}
=
\begin{bmatrix}
a &amp; b\\
c &amp; d
\end{bmatrix}
\begin{bmatrix}
x\\
y
\end{bmatrix}
+
\begin{bmatrix}
t_x\\
t_y
\end{bmatrix}
\]</div>
<p>利用齐次坐标，可以将仿射变换表示为矩阵乘法：</p>
<div class="arithmatex">\[
\begin{pmatrix}
x'\\
y'\\
1
\end{pmatrix}
=
\begin{pmatrix}
a &amp; b &amp; t_x\\
c &amp; d &amp; t_y\\
0 &amp; 0 &amp; 1
\end{pmatrix}
\begin{pmatrix}
x\\
y\\
1
\end{pmatrix}
\]</div>
<h3 id="3">3维变换</h3>
<p>将齐次坐标引入3维空间可得3维变换，其基本形式为：</p>
<div class="arithmatex">\[
\begin{pmatrix}
x'\\
y'\\
z'\\
1
\end{pmatrix}
=
\begin{pmatrix}
a &amp; b &amp; c &amp; t_x\\
d &amp; e &amp; f &amp; t_y\\
g &amp; h &amp; i &amp; t_z\\
0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}
\begin{pmatrix}
x\\
y\\
z\\
1
\end{pmatrix}
\]</div>
<h3 id="3_1">3维旋转</h3>
<p><strong>欧拉角旋转</strong></p>
<p>将任意一个3维旋转分解为绕x轴、y轴、z轴的旋转的组合</p>
<div class="arithmatex">\[
\vec{R}_{xyz}(\alpha,\beta,\gamma)
= \vec{R}_x(\alpha)\,\vec{R}_y(\beta)\,\vec{R}_z(\gamma)
\]</div>
<p><span class="arithmatex">\(\alpha\)</span>、<span class="arithmatex">\(\beta\)</span>、<span class="arithmatex">\(\gamma\)</span>又称为欧拉角（Euler Angles）</p>
<p>这三种旋转类似飞机的滚转（Roll）、俯仰（Pitch）、偏航（Yaw）</p>
<p>欧拉角旋转变换不太方便做插值，四元数变换可以解决这个问题。</p>
<p><strong>罗德里格斯旋转公式（Rodrigues' rotation formula）</strong></p>
<p>将绕<strong>任意过原点的轴</strong> <span class="arithmatex">\(\vec{n}=(n_x,n_y,n_z)\)</span> 旋转 <span class="arithmatex">\(\alpha\)</span> 角度的旋转矩阵表示为以下形式（其中，<span class="arithmatex">\(\vec{I}\)</span> 是单位矩阵）：</p>
<div class="arithmatex">\[
\vec{R}(\vec{n},\alpha)
= \cos(\alpha)\,\vec{I}
+ \bigl(1-\cos(\alpha)\bigr)\,\vec{n}\,\vec{n}^{\mathsf T}
+ \sin(\alpha)\,
\underbrace{\begin{pmatrix}
0 &amp; -n_z &amp;  n_y\\
n_z &amp;  0  &amp; -n_x\\
-n_y &amp; n_x &amp; 0
\end{pmatrix}}_{\vec{N}}
\]</div>
<p><strong>四元数旋转</strong></p>
<p>四元数是一种代数结构，可以用来表示3维空间中的旋转。</p>
<p>和罗德里格斯公式一样，四元数旋转同样是表示绕<strong>任意过原点的轴</strong> <span class="arithmatex">\(\vec{n}=(n_x,n_y,n_z)\)</span> 旋转 <span class="arithmatex">\(\alpha\)</span> 角度。</p>
<p>这里给出四元数的基本形式:</p>
<div class="arithmatex">\[
\vec{q} = x i + y j + z k + w
\]</div>
<p>简记为：</p>
<div class="arithmatex">\[
\vec{q} = (u, w)
\]</div>
<p><strong>纯四元数是指把一个向量 <span class="arithmatex">\((x, y, z)\)</span> 表示为四元数的形式</strong>：</p>
<div class="arithmatex">\[\vec{v} = (v, 0) = x i + y j + z k + 0\]</div>
<p>这里省略四元数的性质和运算规则。</p>
<p><strong>以下是四元数旋转的公式</strong>：</p>
<div class="arithmatex">\[
R_q(\vec{v}) = q\,\vec{v}\,q^{-1}
= q\,\vec{v}\,q^{\star}
= \cos(2\theta)\,\vec{v}
  + \bigl(1-\cos(2\theta)\bigr)\,(\vec{n}\!\cdot\!\vec{v})\,\vec{n}
  + \sin(2\theta)\,(\vec{n}\!\times\!\vec{v})
\]</div>
<p><strong><span class="arithmatex">\(R_q(\vec{v})\)</span> 将向量绕轴 <span class="arithmatex">\(\vec{n}\)</span> 旋转 <span class="arithmatex">\(2\theta\)</span> 角度</strong>，<span class="arithmatex">\(\vec{v}\)</span>是把向量表示为纯四元数的形式（<span class="arithmatex">\(q^{\star}\)</span> 是四元数 <span class="arithmatex">\(q\)</span> 的共轭四元数。<span class="arithmatex">\(q^{-1}\)</span> 是四元数 <span class="arithmatex">\(q\)</span> 的逆四元数）</p>
<p>为了最终旋转的角度是 <span class="arithmatex">\(\theta\)</span>，我们需要将四元数定义为：</p>
<div class="arithmatex">\[q = \left(\sin(\theta/2)\vec{n}, \cos(\theta/2)\right)\]</div>
<p>计算结果也是个纯四元数，等价于向量</p>
<h3 id="_1">欧拉角</h3>
<p>欧拉角是一种三维姿态的描述方法，它表示的是按某种固定顺序的三次旋转动作。</p>
<p>欧拉角按照旋转轴和旋转顺序分为<strong>经典欧拉角</strong>（Proper Euler Angle）和<strong>泰特布莱恩角</strong>（Tait–Bryan angles），共 12种旋转方式。</p>
<p>经典欧拉角只绕两个轴旋转，并且第一个旋转轴和第三个旋转轴相同，它的六种旋转顺序分别是：z-x-z, x-y-x, y-z-y, z-y-z, x-z-x, y-x-y</p>
<p>泰特-布莱恩角使用三个旋转轴，它的六种旋转顺序分别是：x-y-z, y-z-x, z-x-y, x-z-y, z-y-x, y-x-z</p>
<p>按照旋转的坐标系分为两种旋转方式：</p>
<p><strong>内旋</strong>（intrinsic rotation），是每次都相对于变换后的坐标系（即自身的、本地的坐标系）做旋转，又叫动态旋转。</p>
<p><strong>外旋</strong>（extrinsic rotation），是每次都相对初始的（固定的）坐标系做变换，又叫静态旋转。</p>
<p><strong>内旋和外旋有一种等价关系</strong>，例如，内旋 z-x-y 等价于外旋 y-x-z，特点是第一次和最后一次旋转的轴颠倒了顺序，这个关系对12种旋转方式都成立。</p>
<h3 id="gimbal-lock">万向节死锁（Gimbal Lock）问题</h3>
<p>对于泰特布莱恩角（Tait–Bryan angles），例如，以x-y-z 外旋为例，当绕y轴旋转90度后，这时绕z轴旋转和最开始绕x轴的旋转实际上造成的效果是相同的，这是一种万向节死锁（Gimbal Lock）现象。</p>
<p>对于经典欧拉角（Proper Euler Angle），例如，以z-x-z 外旋为例，当绕x轴旋转0度或180度后，这时绕z轴旋转和最开始绕z轴的旋转实际上造成的效果是相同的，这也是一种万向节死锁（Gimbal Lock）现象。</p>
<p><strong>网上有很多拿万向陀螺仪来解释这个问题的文章，毫无疑问，全是错误的</strong>，万向陀螺仪的万向节死锁问题和欧拉角的万向节死锁问题是两个完全不同的概念，万向陀螺仪的万向节死锁问题是因为机械结构的限制而产生的旋转自由度受限问题，而欧拉角的万向节死锁问题是由特殊旋转顺序和角度组合导致的旋转冗余问题。</p>
<h2 id="viewing-transformation">观测变换（Viewing Transformation）</h2>
<p>主要内容：</p>
<ul>
<li>View (视图) / Camera transformation</li>
<li>Projection (投影) transformation<ul>
<li>Orthographic (正交) projection</li>
<li>Perspective (透视) projection</li>
</ul>
</li>
</ul>
<p>渲染一个场景总共需要3步</p>
<ol>
<li>Model transformation：把场景搭建好</li>
<li>View transformation：找个拍摄角度，把场景放到摄像机前面</li>
<li>Projection transformation：拍照！把3D场景投影到2D平面上</li>
</ol>
<p>这三步统称 MVP 变换，本课程重点讲解 View 和 Projection 变换</p>
<h3 id="view-camera-transformation">View / Camera transformation</h3>
<p>定义相机</p>
<ol>
<li>Position <span class="arithmatex">\(\vec{e}\)</span> （摄像机的位置）</li>
<li>Look-at / gaze direction <span class="arithmatex">\(\hat{g}\)</span>（摄像机的朝向，g是单位向量）</li>
<li>Up direction <span class="arithmatex">\(\hat{t}\)</span>（摄像机的上方，垂直于g，<span class="arithmatex">\(\hat{g}\)</span> 和 <span class="arithmatex">\(\hat{t}\)</span> 相配合可以确定相机镜头本身的旋转角度）</li>
</ol>
<p>几个约定俗称的规则：</p>
<ul>
<li>相机的位置永远在原点</li>
<li>相机永远看向z轴负方向（<span class="arithmatex">\(-\hat{z}\)</span>）</li>
<li>相机的上方永远是y轴正方向（<span class="arithmatex">\(\hat{y}\)</span>）</li>
</ul>
<p>这里为什么是看向z轴负方向呢？因为我们使用的是右手坐标系，z轴正方向是从屏幕里指向屏幕外，而我们希望相机是看向屏幕里的方向，所以相机看向z轴负方向。</p>
<p>很多图形api或者3d软件使用的是左手坐标系，这时相机看向z轴正方向。</p>
<p>左手坐标系有个坏处，x叉乘y等于-z，这会让人很迷惑，本课程使用右手坐标系。</p>
<p><strong>把相机从当前位置移动到原点，并且让它看向z轴负方向，这个过程叫做 View / Camera transformation</strong></p>
<div class="arithmatex">\[
M_{\mathrm{view}} = R_{\mathrm{view}}\,T_{\mathrm{view}}
\]</div>
<p>其中 $ R_{\mathrm{view}} $ 是旋转矩阵，$ T_{\mathrm{view}} $ 是平移矩阵。</p>
<p>平移矩阵：把相机从位置 <span class="arithmatex">\(\vec{e}=(x_e,y_e,z_e)\)</span> 移动到原点</p>
<div class="arithmatex">\[
T_{\mathrm{view}} =
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; -x_e \\
0 &amp; 1 &amp; 0 &amp; -y_e \\
0 &amp; 0 &amp; 1 &amp; -z_e \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\]</div>
<p>旋转矩阵：把相机的朝向 <span class="arithmatex">\(\hat{g}\)</span> 变换到 <span class="arithmatex">\(-\hat{z}\)</span> 方向，把 <span class="arithmatex">\(\hat{t}\)</span> 变换到 <span class="arithmatex">\(\hat{y}\)</span> 方向，把 <span class="arithmatex">\(\hat{r}=\hat{g}\times\hat{t}\)</span> 变换到 <span class="arithmatex">\(\hat{x}\)</span> 方向</p>
<p>这个旋转矩阵不太好求，它的逆矩阵很容易写出来，可以先求它的逆矩阵 $ R_{\mathrm{view}}^{-1} $，然后再对它求逆</p>
<div class="arithmatex">\[
R_{\mathrm{view}}^{-1} =
\begin{bmatrix}
x_{\hat{g}\times\hat{t}} &amp; x_{\hat{t}} &amp; x_{-\hat{g}} &amp; 0 \\
y_{\hat{g}\times\hat{t}} &amp; y_{\hat{t}} &amp; y_{-\hat{g}} &amp; 0 \\
z_{\hat{g}\times\hat{t}} &amp; z_{\hat{t}} &amp; z_{-\hat{g}} &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\]</div>
<p>由于旋转矩阵是正交矩阵，所以直接转置后就能得到逆矩阵</p>
<div class="arithmatex">\[
R_{\mathrm{view}} =
\begin{bmatrix}
x_{\hat{g}\times\hat{t}} &amp; y_{\hat{g}\times\hat{t}} &amp; z_{\hat{g}\times\hat{t}} &amp; 0 \\
x_{\hat{t}} &amp; y_{\hat{t}} &amp; z_{\hat{t}} &amp; 0 \\
x_{-\hat{g}} &amp; y_{-\hat{g}} &amp; z_{-\hat{g}} &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\]</div>
<p><strong>这个过程也叫 Model / View transformation，因为相机和物体之间的关系不能变，场景中所有的物体也要做这个变换</strong>。</p>
<h3 id="projection-transformation">Projection transformation</h3>
<ul>
<li>Orthographic (正交) projection</li>
<li>Perspective (透视) projection</li>
</ul>
<p>正交投影和透视投影的区别：</p>
<p><img alt="/img/games101-notes/orthographic-perspective-1.png" src="/img/games101-notes/orthographic-perspective-1.png" /></p>
<p>对正交投影来说，无论摄像机离得有多远，投影的物体大小都不会变：</p>
<p><img alt="/img/games101-notes/orthographic-perspective-2.png" src="/img/games101-notes/orthographic-perspective-2.png" /></p>
<h3 id="orthographic-projection">正交投影 (Orthographic projection)</h3>
<ol>
<li>先做View/Camera transformation，把场景放到摄像机前面</li>
<li>丢掉z坐标</li>
<li>将结果矩形缩放到<span class="arithmatex">\([-1,1]\)</span>范围内</li>
</ol>
<p>一般来讲，正交投影是要把任意一个立方体变换为一个正则、规范、标准的（Canonical）立方体（<span class="arithmatex">\([-1,1]^3\)</span>）, 先做平移变换，然后缩放变换</p>
<p><img alt="/img/games101-notes/orthographic-projection.png" src="/img/games101-notes/orthographic-projection.png" /></p>
<p>假设我们要把一个立方体 <span class="arithmatex">\([l,r]\times[b,t]\times[n,f]\)</span> 变换为 <span class="arithmatex">\([-1,1]^3\)</span>，其中 <span class="arithmatex">\(l\)</span> 是 left，<span class="arithmatex">\(r\)</span> 是 right，<span class="arithmatex">\(b\)</span> 是 bottom，<span class="arithmatex">\(t\)</span> 是 top，<span class="arithmatex">\(n\)</span> 是 near，<span class="arithmatex">\(f\)</span> 是 far</p>
<p>变换矩阵为（注意，这里 n 和 f 都是负值，因为相机是看向-z轴的）：</p>
<div class="arithmatex">\[
M_{\mathrm{ortho}} =
\begin{bmatrix}
\frac{2}{r-l} &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; \frac{2}{t-b} &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; \frac{2}{n-f} &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; -\frac{r+l}{2} \\
0 &amp; 1 &amp; 0 &amp; -\frac{t+b}{2} \\
0 &amp; 0 &amp; 1 &amp; -\frac{n+f}{2} \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\]</div>
<h3 id="perspective-projection">透视投影 (Perspective projection)</h3>
<p>透视投影中，相机在原点，相机和视角围成一个四棱锥体（Frustum），相机前面有两个平面，近景平面和远景平面，近景平面和远景平面分别截出这个四棱锥体的顶部和底部。</p>
<p>透视投影分为两步：</p>
<ol>
<li>先把四棱锥体（Frustum）挤压成一个立方体（Cuboid），对应的变化写作 <span class="arithmatex">\(M_{\mathrm{persp}\to\mathrm{ortho}}\)</span></li>
<li>然后对这个立方体做一次正交投影 <span class="arithmatex">\(M_{\mathrm{ortho}}\)</span></li>
</ol>
<p>最终，完整的透视投影为 <span class="arithmatex">\(M_{\mathrm{persp}} = M_{\mathrm{ortho}}\,M_{\mathrm{persp}\to\mathrm{ortho}}\)</span></p>
<p>下图是透视投影挤压过程的示意图，其中，<span class="arithmatex">\(n\)</span> 和 <span class="arithmatex">\(f\)</span> 分别表示近景平面和远景平面的 z 坐标</p>
<p><img alt="perspective-projection.png" src="/img/games101-notes/perspective-projection.png" /></p>
<p>挤压过程中，近景平面的点不变，远景平面的点 z 坐标不变，尺寸变为和近景平面一样的大小。</p>
<p>四棱锥远景平面和近景平面的 y 坐标呈现这样的关系（x 坐标同理）：</p>
<p><img alt="persp2ortho.png" src="/img/games101-notes/persp2ortho.png" /></p>
<p>经过一顿推导，得到挤压矩阵（利用了齐次坐标同时乘以一个数坐标不变的性质）：</p>
<div class="arithmatex">\[
M_{\mathrm{persp}\to\mathrm{ortho}} =
\begin{pmatrix}
n &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; n &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; n+f &amp; -nf \\
0 &amp; 0 &amp; 1 &amp; 0
\end{pmatrix}
\]</div>
<p>Frustum这个四棱锥体又叫视锥，由垂直方向的Fov（Field of View，视野角度）和宽高比（Aspect Ratio）决定，用FovY表示垂直方向的Fov。</p>
<p>用 <span class="arithmatex">\([l,r]\times[b,t]\)</span> 来表示近景平面，<span class="arithmatex">\(n\)</span> 和 <span class="arithmatex">\(f\)</span> 仍然表示近景平面和远景平面的 z 坐标，那么FovY 和 aspect 与 <span class="arithmatex">\(l,r,b,t,n,f\)</span> 的关系为：</p>
<div class="arithmatex">\[
\tan\!\left(\frac{\mathrm{FovY}}{2}\right) = \frac{t}{\lvert n\rvert}
\]</div>
<div class="arithmatex">\[
\mathrm{aspect} = \frac{r}{t}
\]</div>
<h2 id="_2">光栅化</h2>
<p>raster（光栅）这个词来源于德语，就是指屏幕</p>
<p>rasterize（光栅化）是将图像绘制到屏幕上</p>
<h3 id="viewport-transformation-">视口变换（Viewport Transformation）：标准立方体坐标-&gt;屏幕坐标</h3>
<p>先忽略z坐标，把标准立方体 <span class="arithmatex">\([-1,1]^3\)</span> 投影到二维平面上，得到一个正方形 <span class="arithmatex">\([-1,1]^2\)</span>，然后把这个正方形缩放到屏幕大小 <span class="arithmatex">\([0,w]\times[0,h]\)</span> 上，得到一个视口（Viewport）变换矩阵：</p>
<div class="arithmatex">\[
M_{\mathrm{viewport}} =
\begin{pmatrix}
\frac{\mathrm{width}}{2} &amp; 0 &amp; 0 &amp; \frac{\mathrm{width}}{2} \\
0 &amp; \frac{\mathrm{height}}{2} &amp; 0 &amp; \frac{\mathrm{height}}{2} \\
0 &amp; 0 &amp; 1 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{pmatrix}
\]</div>
<h3 id="_3">光栅化：把多边形绘制到屏幕上，并填满像素</h3>
<p>上面的视口变换只是把标准立方体的坐标变换为屏幕坐标，这些坐标只能构成一个个多边形，但要绘制到屏幕上，还需要把这些多边形填满像素，这个过程叫做光栅化（Rasterization）</p>
<h3 id="_4">三角形</h3>
<p>最基础的多边形，它有以下优点：</p>
<ol>
<li>三角形必然是一个平面，不可能是弯曲的。</li>
<li>三角形内外定义非常清晰，用叉积很容易判断。</li>
<li>容易进行插值计算。</li>
</ol>
<h3 id="sampling">采样（Sampling）</h3>
<p>为什么要采样，因为输入数据是一个个坐标，它们围成的多边形是连续的面，而屏幕是由一个个像素组成的，光栅化的过程是要把连续的面离散化到一个个像素上，因此这个过程就叫做采样，屏幕的分辨率就是采样率。</p>
<p>下图是一个采样的例子，判断每个像素的中心是否在三角形内，这里要注意，像素的坐标是以像素的左下角为准，而采样是以像素的中心为准。</p>
<p><img alt="sample.png" src="/img/games101-notes/sample.png" /></p>
<p>Bounding Box（边界框）是指包含三角形的最小矩形，可以用来加速采样过程。意思是，只对边界框内的像素做采样，边界框外的像素不做采样。</p>
<p>判断像素是否在三角形内部这个过程也叫覆盖测试（Coverage Test）。</p>
<p>直线的采样和绘制可以参考（Bresenham直线绘制算法，代码可参考https://stackoverflow.com/a/16405254）</p>
<h2 id="anti-aliasing">抗锯齿/反走样（Anti-aliasing）</h2>
<p>采样错误是发生在给像素填色这个过程中，总有一些像素位于三角形的边缘，如果我们不做任何额外处理，这些像素要么填色，要么不填色，这就会造成锯齿现象。</p>
<h3 id="sampling-error">采样错误（Sampling Error）</h3>
<p>锯齿(Jaggies)</p>
<p><img alt="aliasing-jaggies.png" src="/img/games101-notes/aliasing-jaggies.png" /></p>
<p>摩尔纹（Moire Patterns），跳过奇数行和奇数列形成</p>
<p><img alt="moire-patterns.png" src="/img/games101-notes/moire-patterns.png" /></p>
<p>车轮效应（Wagon-wheel Effect），这是一种时间采样错误，一个旋转的车轮看起来像是静止的，或者是反向旋转的。</p>
<p>采样错误的原因基本上是信号变化太快，采样速度跟不上信号变化的速度。</p>
<h3 id="_5">模糊：一种抗锯齿方法</h3>
<p>Bluring（Pre-filtering）before sampling，即采样之前先做模糊处理</p>
<p><img alt="blur-pre-filter.png" src="/img/games101-notes/blur-pre-filter.png" /></p>
<p>如果把模糊和采样的顺序反过来，先采样，再模糊（Blurred aliasing），效果并不好。</p>
<h3 id="_6">为什么会走样/失真</h3>
<p>走样（Aliasing）是因为采样频率远低于信号频率，造成采样结果失真。</p>
<p><img alt="aliases.png" src="/img/games101-notes/aliases.png" /></p>
<h3 id="_7">滤波</h3>
<p>滤波（Filtering）是指丢掉某些特定频率。</p>
<p>傅里叶变换是做从时域（Spatial domain）到频域（Frequency domain）的转换，将一个时域函数拆分成多个不同频率的正弦函数：</p>
<p><img alt="fourier-transform.png" src="/img/games101-notes/fourier-transform.png" /></p>
<p>一副图像也可以表示为频谱的形式，频谱中的高频部分对应的是图像中变化剧烈的部分，比如图像内容的边界。</p>
<p>将低频部分过滤掉，保留高频部分，可以得到图像的边界信息，这叫高通滤波。</p>
<p>如果将高频部分过滤掉，保留低频部分，可以得到一副模糊的图像，这叫低通滤波。</p>
<h3 id="_8">怎么滤波</h3>
<p>Filtering = Convolution（卷积） = Averaging</p>
<p>（这里的卷积是指时域上的卷积）</p>
<p>一个简单的卷积运算示例，filter相当于一个滑动窗口，从左向右移动，每滑动一次，就将signal和filter做一次点积操作，得到一个新的信号，这其实是一个求原始信号加权平均的操作：</p>
<p><img alt="convolution.png" src="/img/games101-notes/convolution.png" /></p>
<p>时域上的卷积等于频域上的乘积，时域上的乘积等于频域上的卷积。</p>
<p>下面是一个对图像做卷积的例子，对3x3的区域做卷积，相当于对这块区域做了一个加权平均，起到了模糊的效果，这也相当于对图像做了一个低通滤波：</p>
<p><img alt="image-convolution.png" src="/img/games101-notes/image-convolution.png" /></p>
<h3 id="_9">从信号的角度分析采样和走样</h3>
<p>采样是在时域上将原始信号和冲激序列函数相乘，在频域上是将原始信号的频谱和冲激序列函数的频谱做卷积。</p>
<p>采样在频域上其实是重复一个原始信号的频谱。</p>
<p><img alt="sampling-repeat-frequency-contents.png" src="/img/games101-notes/sampling-repeat-frequency-contents.png" /></p>
<p>走样实际上是在采样后，频域上的原始频谱发生了混叠（采样频率越低，冲激序列的频谱越在低频集中）</p>
<p><img alt="aliasing-mixed-frequency-contents.png" src="/img/games101-notes/aliasing-mixed-frequency-contents.png" /></p>
<p>（奈奎斯特采样定理这里没讲）</p>
<h3 id="_10">如何降低采样错误</h3>
<ol>
<li>提升采样率</li>
<li>反走样，例如前面提到的，先做模糊，再采样</li>
</ol>
<h3 id="_11">通过模糊实现抗锯齿</h3>
<p>用一个像素大小的滤波器（Box-blur filter）对三角形做卷积操作，对三角形边缘的颜色做加权平均，将其模糊化。</p>
<p>然后在每个像素中心点位置做采样。</p>
<p>滤波器的权重按照像素覆盖三角形的面积比例来定。</p>
<h3 id="msaa-multi-sample-anti-aliasing">多重采样抗锯齿（MSAA, Multi-Sample Anti-Aliasing）</h3>
<p>计算单个像素被三角形覆盖的比例这个过程比较复杂，有一个近似方法，就是把单个像素划分为多个采样点（例如2x2、4x4），用多个采样点采样来近似这个比例，最后根据比例为像素填色。</p>
<p>模糊操作同时也完成了采样这一过程。</p>
<p>MSAA的代价是计算量增大，因为采样点增多了。</p>
<p>MASS的黑边问题，因为有些像素被三角形覆盖的比例很小，这些像素的颜色会很暗，形成黑边，有两个解决办法：</p>
<ol>
<li>为覆盖率指定一个阈值，只有高于这个阈值的像素才填色，这样，最暗的像素的亮度一定不会低于这个阈值。它的问题在于：（1）MASS的效果会变差，因为有些像素本来是有颜色的，但由于覆盖率低于阈值而被丢弃了；</li>
<li>将覆盖率过低的像素的深度值设置为无穷远，这样，这些像素可以被后绘制的三角形覆盖掉，它解决了方案1的问题。</li>
</ol>
<h3 id="_12">其他抗锯齿方法</h3>
<ul>
<li>FXAA(Fast Approximate Anti-Aliasing)<br />
  不是增加采样点，而是通过对渲染图像的后处理，把图像上的锯齿边界找到，然后去掉锯齿，换成平滑的边界（简单来说就是把锯齿P掉）。</li>
<li>TAA(Temporal Anti-Aliasing)<br />
  利用时间做抗锯齿，利用前一帧的采样信息来辅助当前帧的采样，具体来说，就是把MSAA划分出来的多个采样点，放在时间尺度上去处理。</li>
<li>超分（Super Resolution）/超采样（Super Sampling）<ul>
<li>用低分辨率渲染图像，然后用AI算法把图像放大到高分辨率。</li>
<li>DLSS（Deep Learning Super Sampling）</li>
</ul>
</li>
</ul>
<h3 id="_13">总结</h3>
<p>抗锯齿本质上是对像素颜色的调整，目的是让图像看起来更平滑，并不涉及坐标的处理。</p>
<p>滤波方法是要将图像模糊化，降低图像的高频部分，而图像的频率是由图像的亮度（灰度）变换决定的，从这个角度来看，抗锯齿也仅仅是对图像颜色的处理。</p>
<h2 id="_14">物体可见性</h2>
<p>画家算法（Painter's Algorithm），从远道近画，近处的物体覆盖远处的物体。</p>
<p>画家算法的问题是很多情况很难说清楚哪个物体在前，哪个物体在后，例如两个三角形相交的情况。</p>
<h3 id="z-buffer">Z-Buffer</h3>
<p>深度缓存（Depth Buffer），也叫z-buffer，给每个像素增加一个深度值，用z-buffer记录当前已绘制像素的深度值，新绘制的像素如果深度值更小，就覆盖当前像素，否则丢弃。</p>
<p>利用深度缓存判断物体遮挡这个过程也叫深度测试（Depth Testing）。</p>
<p>主要流程：</p>
<ol>
<li>先把深度缓存初始化为无限远</li>
<li>对每个三角形做光栅化</li>
<li>对每个像素做采样</li>
<li>计算采样点的深度值</li>
<li>如果深度值小于当前像素的深度值，就更新像素颜色和深度值，否则丢弃</li>
</ol>
<p>这里没讲多个三角形深度相同的情况如何处理。</p>
<h3 id="_15">透视投影深度矫正</h3>
<p>在深度测试时，不能直接用透视投影后的z坐标做深度值，因为对于透视投影来说，挤压视锥体的过程会改变z坐标的线性关系，如果直接用透视投影变换后的z坐标做深度值，会导致深度测试错误。</p>
<p>因此，我们需要对z坐标做矫正，一般采用以下公式：</p>
<div class="arithmatex">\[
Z = \frac{1}{\dfrac{\alpha}{w_0} + \dfrac{\beta}{w_1} + \dfrac{\gamma}{w_2}} 
\]</div>
<div class="arithmatex">\[
 z_p = \left(\frac{\alpha z_0}{w_0} + \frac{\beta z_1}{w_1} + \frac{\gamma z_2}{w_2}\right) Z
\]</div>
<p>其中，<span class="arithmatex">\(0,1,2\)</span> 分别代表三角形的三个顶点，<span class="arithmatex">\(w_0,w_1,w_2\)</span> 是三角形顶点的齐次坐标，<span class="arithmatex">\(\alpha,\beta,\gamma\)</span> 是重心坐标。</p>
<p>这里利用到一个性质，经过投影变换后，点的齐次坐标 <span class="arithmatex">\(w\)</span> 的值刚好等于变换前的 z 坐标的值（即在视图空间下的z值）。</p>
<h3 id="_16">插值</h3>
<p>由于我们只知道三角形顶点的深度值，如何计算三角形内部任意一点的深度值呢？这就需要插值。</p>
<p>可以使用重心坐标插值（Barycentric Coordinates Interpolation）</p>
<ul>
<li>对屏幕空间三角形 ABC 内任意点 P，用三个权重 α, β, γ 表示<ul>
<li>P = αA + βB + γC，且 α + β + γ = 1</li>
<li>α, β, γ 分别等于子三角形 PBC、PCA、PAB 的面积占比（带符号面积）</li>
</ul>
</li>
<li>这些权重有两个核心用途：<ul>
<li>覆盖测试：若 α, β, γ 全同号（通常 ≥ 0），P 在三角形内或边上。</li>
<li>属性插值（颜色、深度、法线、UV 等）：attr(P) = α·attr(A) + β·attr(B) + γ·attr(C)。</li>
</ul>
</li>
<li>深度插值<br />
  得到 α, β, γ 后，可以求z插值，这里<span class="arithmatex">\(A_w\)</span>、<span class="arithmatex">\(B_w\)</span>、<span class="arithmatex">\(C_w\)</span>都是齐次坐标：
  $$
  z_{\text{插值}}
  = \frac{\alpha \frac{A_z}{A_w} + \beta \frac{B_z}{B_w} + \gamma \frac{C_z}{C_w}}
        {\alpha \frac{1}{A_w} + \beta \frac{1}{B_w} + \gamma \frac{1}{C_w}}
  $$</li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ©2020-2025 shiwj | 津ICP备2020010292号-1
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>