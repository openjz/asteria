
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://blog.shiwj.com/tools/nginx/48.nginx-getting-started-tutorial/">
      
      
        <link rel="prev" href="../../build/21.makefile-tutorial/">
      
      
        <link rel="next" href="../49.nginx-install-configuration/">
      
      
      <link rel="icon" href="../../../img/avatar.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>nginx入门教程 - Asteria</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Asteria" class="md-header__button md-logo" aria-label="Asteria" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.45 4.73L5.82 21z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Asteria
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              nginx入门教程
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/openjz/asteria" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../foundation/11.z2.go-gopl/" class="md-tabs__link">
          
  
  
  Foundation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../front-end/10.js-mdn-tutorial/" class="md-tabs__link">
          
  
  
  Front end

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../graphics/32.unity-webgl-deploy/" class="md-tabs__link">
          
  
  
  Graphics

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../interview/16.interview-bagu-golang/" class="md-tabs__link">
          
  
  
  Interview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux/41.linux-so-dynamic-load/" class="md-tabs__link">
          
  
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/15.remainder-and-modulo/" class="md-tabs__link">
          
  
  
  Math

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../multi-media/58.build_obs/" class="md-tabs__link">
          
  
  
  Multi media

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../others/11.z3.time/" class="md-tabs__link">
          
  
  
  Others

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../38.bluetooth-tools/" class="md-tabs__link">
          
  
  
  Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../windows/35.windows-devices-manage/" class="md-tabs__link">
          
  
  
  Windows

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Asteria" class="md-nav__button md-logo" aria-label="Asteria" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.45 4.73L5.82 21z"/></svg>

    </a>
    Asteria
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/openjz/asteria" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Foundation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Foundation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/11.z2.go-gopl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    golang入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/50.php-install-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    php安装和配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/72.clrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《算法导论第3版》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/73.asemblly-wangshuang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《汇编语言第4版（王爽）》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Code design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/code-design/51.closure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    闭包
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/code-design/70.design-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《设计模式》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concurrent programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Concurrent programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/concurrent-programming/30.coroutine-stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    有栈协程和无栈协程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/concurrent-programming/37.condition-variable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    条件变量
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/concurrent-programming/71.lockfree-ringbuffer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    无锁环形Buffer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cpp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Cpp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/20.cpp-stl-algorithm-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++标准库算法概览
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/23.cpp-new-malloc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中new和malloc的区别
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/24.cpp-static/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中的static
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/25.cpp-dup-symbols/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中符号重定义问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/26.cpp-copy-move/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中的拷贝和移动语义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/27.cpp-const/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++中的const
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/28.cpp-inline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于C++ inline关键字
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/29.cpp-forward-declaration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于C++前向声明
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/57.effective-cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《Effective C++ 第三版》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/62.effective-modern-cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《Effective Modern C++》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/65.cpp-template-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++模板使用技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/66.cpp-stl-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++ STL使用技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/67.cpp-operator-overloading-tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++ 运算符重载使用技巧
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/68.cpp-memory-analysis-asan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++内存分析：ASan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/cpp/69.cpp-memory-analysis-vld/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    c++内存分析：VLD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/database/11.z1.mysql-crash-course/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/database/13.mysql-complex-sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql中的复杂查询
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/network/12.z1.ip-address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于IP地址的发展
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Os
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            Os
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/os/14.threadexit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线程什么时候终止
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../foundation/os/74.csapp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《深入理解计算机系统第3版》阅读笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Front end
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Front end
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/10.js-mdn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    js入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/11.css-mdn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    css入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/17.html-mdn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    html入门笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../front-end/18.webpage-print/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    打印html页面
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Graphics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Graphics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphics/32.unity-webgl-deploy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如何部署unity生成的WebGL包
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphics/33.rendering-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    渲染管线介绍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Games101
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Games101
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphics/games101/75.games101-1-transform-rasterization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    games101 一、变换和光栅化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphics/games101/games101-2-shading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    games101 二、着色
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphics/games101/games101-3-geometry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    games101 三、几何
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Interview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/16.interview-bagu-golang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-golang
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/19.interview-bagu-cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-c++
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/52.interview-bagu-general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-通用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../interview/53.interview-bagu-distribute-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面试八股-分布式系统
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/41.linux-so-dynamic-load/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux 动态库so文件 动态加载
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/42.linux-jiu-gai-zhe-me-xue-note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    《linux就该这么学》笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/43.linux-common-command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux常用命令
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/44.linux-common-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux常用配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/45.linux-net-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux网络配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/47.linux-muti-thread-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux多线程编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/9.linux-core-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    linux core dump配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Math
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/15.remainder-and-modulo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    取余和取模的区别
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/31.linear-algebra-3B1B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性代数的几何意义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/63.affine-transformation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    理解仿射变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/64.calculus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    微积分学习笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Multi media
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Multi media
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multi-media/58.build_obs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    编译obs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../multi-media/59.ffmpeg_cmd_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ffmpeg命令行例子
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/11.z3.time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算机中的时间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/12.digital-signatures-certificates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数字签名, 数字证书以及加密通信
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/34.bluetooth-specification-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    蓝牙相关知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/40.bug-record/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些开发过程中遇到的奇怪问题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../38.bluetooth-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    蓝牙调试工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../46.ssh-login-script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ssh登陆脚本
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../60.vscode-continue-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vscode continue AI插件配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../61.understand-scitools-keygen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scientific Toolworks Understand 7.0.x 破解机使用方法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Build
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            Build
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build/21.makefile-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    makefile笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_6" checked>
        
          
          <label class="md-nav__link" for="__nav_10_6" id="__nav_10_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10_6">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    nginx入门教程
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    nginx入门教程
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      参考
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      nginx介绍
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      nginx命令
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      配置文件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#web-server" class="md-nav__link">
    <span class="md-ellipsis">
      Web Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Web Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location" class="md-nav__link">
    <span class="md-ellipsis">
      location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location_1" class="md-nav__link">
    <span class="md-ellipsis">
      location匹配规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location_2" class="md-nav__link">
    <span class="md-ellipsis">
      location路由规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fastcgi" class="md-nav__link">
    <span class="md-ellipsis">
      FastCGI代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error_page" class="md-nav__link">
    <span class="md-ellipsis">
      error_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      服务静态内容
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      可以返回状态码
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      可以转发请求
    </span>
  </a>
  
    <nav class="md-nav" aria-label="可以转发请求">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffer" class="md-nav__link">
    <span class="md-ellipsis">
      buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      绑定ip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      压缩和解压
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      负载均衡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="负载均衡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    <span class="md-ellipsis">
      http负载均衡
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      安全控制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="安全控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      https
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcpssl" class="md-nav__link">
    <span class="md-ellipsis">
      TCP流量也可以配置ssl代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http_1" class="md-nav__link">
    <span class="md-ellipsis">
      使用HTTP基本认证做访问控制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_2" class="md-nav__link">
    <span class="md-ellipsis">
      nginx访问控制接口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      对访问进行限制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sslhttptcp" class="md-nav__link">
    <span class="md-ellipsis">
      和后端服务建立ssl连接（包括http和tcp流量）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip_1" class="md-nav__link">
    <span class="md-ellipsis">
      IP地址的动态黑名单
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      监控和日志
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      代理服务器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="代理服务器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serverip" class="md-nav__link">
    <span class="md-ellipsis">
      如何让后端server得到真正的客户端ip（当存在多层代理或负载均衡时）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      关于代理协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_3" class="md-nav__link">
    <span class="md-ellipsis">
      nginx变量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../49.nginx-install-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nginx安装和配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7" >
        
          
          <label class="md-nav__link" for="__nav_10_7" id="__nav_10_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Package manager
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7">
            <span class="md-nav__icon md-icon"></span>
            Package manager
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../package-manager/22.scl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    scl-rhel/centos软件运行环境
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Windows
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Windows
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/35.windows-devices-manage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    windows设备管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/39.windows-dump-debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    windows下调试dump文件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/54.windows_ifeo_windbg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用IFEO映像劫持+windbg在进程运行过程中调试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/55.winodws_develop_knowledge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一些和windows开发相关的小知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../windows/56.char-wchar-on-windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    char和wchar_t在windows上如何正确使用
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      参考
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      nginx介绍
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      nginx命令
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      配置文件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#web-server" class="md-nav__link">
    <span class="md-ellipsis">
      Web Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Web Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location" class="md-nav__link">
    <span class="md-ellipsis">
      location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location_1" class="md-nav__link">
    <span class="md-ellipsis">
      location匹配规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location_2" class="md-nav__link">
    <span class="md-ellipsis">
      location路由规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fastcgi" class="md-nav__link">
    <span class="md-ellipsis">
      FastCGI代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error_page" class="md-nav__link">
    <span class="md-ellipsis">
      error_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      服务静态内容
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      可以返回状态码
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      可以转发请求
    </span>
  </a>
  
    <nav class="md-nav" aria-label="可以转发请求">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffer" class="md-nav__link">
    <span class="md-ellipsis">
      buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      绑定ip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      压缩和解压
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      负载均衡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="负载均衡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    <span class="md-ellipsis">
      http负载均衡
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      安全控制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="安全控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      https
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcpssl" class="md-nav__link">
    <span class="md-ellipsis">
      TCP流量也可以配置ssl代理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http_1" class="md-nav__link">
    <span class="md-ellipsis">
      使用HTTP基本认证做访问控制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_2" class="md-nav__link">
    <span class="md-ellipsis">
      nginx访问控制接口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      对访问进行限制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sslhttptcp" class="md-nav__link">
    <span class="md-ellipsis">
      和后端服务建立ssl连接（包括http和tcp流量）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip_1" class="md-nav__link">
    <span class="md-ellipsis">
      IP地址的动态黑名单
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      监控和日志
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      代理服务器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="代理服务器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serverip" class="md-nav__link">
    <span class="md-ellipsis">
      如何让后端server得到真正的客户端ip（当存在多层代理或负载均衡时）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      关于代理协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx_3" class="md-nav__link">
    <span class="md-ellipsis">
      nginx变量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h2 id="_1">参考</h2>
<ul>
<li><a href="http://nginx.org/en/docs/">nginx.org文档</a></li>
<li><a href="https://docs.nginx.com/">Nginx Plus Admin Guide</a></li>
<li><a href="https://docs.nginx.com/nginx/admin-guide/">安装部署nginx的各种方法（安装、编译、安装动态模块、docker部署）</a></li>
</ul>
<h2 id="nginx">nginx介绍</h2>
<p>nginx有一个master进程和若干个worker进程。master进程负责读配置文件和维护worker进程，真正负责处理请求的是worker进程。</p>
<p>access.log和error.log是nginx的日志文件。</p>
<h2 id="nginx_1">nginx命令</h2>
<p>直接执行二进制文件sbin/nginx启动nginx</p>
<p>其他操作要按照<code>nginx -s [信号]</code>的格式来执行，常用信号：</p>
<ul>
<li>stop：立即关闭nginx</li>
<li>quit：等worker进程处理完当前请求再关闭nginx，但是必须由启动nginx的用户执行这条命令。</li>
<li>reload：重新加载配置文件</li>
<li>reopen：重新打开日志文件</li>
</ul>
<h2 id="_2">配置文件</h2>
<p>配置文件是nginx.conf，文件中的注释以‘#’开头。</p>
<p>nginx的模块由配置文件中的指令控制。指令分为单指令和块指令，单指令以分号结尾，块指令以一对大括号结尾。  </p>
<p>块指令被看作是一个context，所有context之外被看作为main context。  </p>
<p>四个顶级指令对应四种不同的连接：</p>
<ul>
<li>events：通用连接</li>
<li>http：http连接</li>
<li>mail：邮件连接</li>
<li>stream：tcp和udp连接</li>
</ul>
<p>其他命令：</p>
<ul>
<li>inlcude命令：引入其他配置文件</li>
</ul>
<h2 id="web-server">Web Server</h2>
<h3 id="server">server</h3>
<p>一个server块可以视为一个逻辑上的服务器。</p>
<p><strong>每种连接的context内都可以有一个或多个server块，但是连接的类型不同时，server内能够包含的指令也不同</strong>。http块内的server能包含location指令。</p>
<p>server之间通过监听的端口（listen）和server名（server_name）区分。</p>
<p>如果nginx没有匹配到任何一个location或者没找到url中的文件，返回404。</p>
<pre><code class="language-nginx">http {
    server {
        listen [ip][:port]
        server_name host1 host2 ...
        root #如果location块中没有root，就使用这个root
        ...
        location
        location
        ...
    }
    server {}
}
</code></pre>
<ul>
<li>listen指令如果没有端口号，默认使用80端口；如果没有ip，默认监听所有ip</li>
<li>如果有多个server匹配到了请求，nginx根据请求头的HOST字段和server_name进行匹配，HOST一般是域名</li>
<li>精确匹配、通配符（*）、Perl语法的正则表达式；通配符只能放在开头和结尾，开头和结尾可以同时带通配符；正则表达式前面要加个波浪号（~）</li>
<li>如果匹配到了多个server name，nginx根据以下顺序选择server name<ul>
<li>精确的HOST</li>
<li>最长的通配符（*）开头的HOST，例如<code>*.example.org</code></li>
<li>最长的通配符（*）结尾的HOSt，例如<code>mail.*</code></li>
<li>根据在配置文件中出现的顺序，第一个匹配到的正则表达式</li>
</ul>
</li>
<li>如果最后还是没匹配到server，nginx会把请求路由到默认的server，即配置文件中的第一个server</li>
<li>
<p>可以自定义默认的server</p>
<p><code>nginx
server {
    listen 80 default_server;
}</code></p>
</li>
</ul>
<h3 id="location">location</h3>
<p>location命令定义了一个url的匹配和路由规则，server块内可以有多个location命令。</p>
<pre><code class="language-nginx">location pattern {
    root xxx
}
</code></pre>
<p>url匹配到一个location后，url的路径会拼在root指定的路径后面，nginx最终会到这个拼起来的路径里去找文件。</p>
<h3 id="location_1">location匹配规则</h3>
<p>location命令格式：<code>location [=|~|~*|^~|@...] /url/ {...}</code></p>
<p><code>location</code>后面的<code>[=|~|~*|^~|@...]</code>指定了Nginx以哪种方式匹配url。常见的有，
|||
|---|---|
|<code>=</code>|精确匹配|
|<code>^~</code>|nginx会匹配最长最完整的前缀。如果匹配到的前缀前面带有<code>^~</code>，就停止匹配，否则，先匹配正则表达式，如果没匹配到，才会选择之前匹配到的前缀|
|<code>~</code>|正则匹配，区分大小写|
|<code>~*</code>|正则匹配，不区分大小写|
|只有一个URL|普通前缀匹配|
|只有一个URL并且只是个<code>/</code>|通用匹配|
|<code>@</code>|用于内部重定向名，只能被nginx内部配置指令访问，不能被外部client访问|
|||</p>
<p>Nginx的<code>location</code>规则可以写很多个，而且不同的匹配方式存在优先级，一个URL进来以后，Nginx先把这个URL拿去和优先级最高的匹配规则进行匹配，如果匹配到了，则不再进行匹配，如果没匹配到，Nginx会寻找更低优先级的匹配规则和这个URL进行匹配。以下是<strong>优先级顺序</strong>，</p>
<ol>
<li>精确匹配 <code>=</code> 优先级最高；</li>
<li>前缀匹配 <code>^~</code> ；</li>
<li>正则匹配，正则匹配之间的优先级和配置文件中定义的顺序一致；</li>
<li>普通前缀匹配；</li>
<li>通用匹配</li>
</ol>
<p>如果所有规则都匹配不到，Nginx会返回404。</p>
<h3 id="location_2">location路由规则</h3>
<pre><code class="language-nginx">location ... {
    root
    proxy_pass

    return 404;
    return 301 http://www.example.com;

    # 替换http响应中的内容
    sub_filter origin target;
    sub_filter_once on/off;
}
</code></pre>
<p><code>location</code>的路由规则写在<code>{}</code>里，所有规则以<code>;</code>结尾，常见的有这么几项：</p>
<ul>
<li><code>root</code>：Web根路径，Nginx会在root+URL里的相对路径下找请求的文件。</li>
<li><code>alias</code>：无视URL里的相对路径，直接在alias指定的目录下查找文件。(有帖子说alias指定的路径后面必须带上<code>'/'</code>)</li>
<li><code>proxy_pass</code>：反向代理指令，将请求转发到proxy_pass指定的地址。（地址末尾带不带<code>'/'</code>有区别）</li>
<li><code>rewrite</code>：使用变量、正则表达式和结尾的flag实现URL重写及重定向（在同一域名内）。语法：<code>rewrite regex replacement [flag]</code>。以下是结尾的标志位的含义：</li>
<li><code>last</code>：可能会有连续的多条rewrite规则，<code>last</code>表示这个<code>rewrite</code>已完成，不再进入后面的rewrite，但由于rewrite后是一个新的URL，所以还是会进入server重走一遍匹配流程。</li>
<li><code>break</code>：表示这条<code>rewrite</code>已完成，并且nginx不会再匹配重写后的URL。</li>
<li><code>redirect</code>：返回302临时重定向；</li>
<li><code>permanent</code>：返回301永久重定向；  </li>
</ul>
<p>replacement语句里用类似<code>$1</code>、<code>$2</code>的标志，来替换正则表达式里的第几个括号匹配到的内容。
- <code>fastcgi_pass</code>：转发针对php程序的请求，转发到后台的FastCGI服务器。FastCGI监听的方式有两种，一种是通过TCP，一种是通过socket文件（.sock文件）。因此<code>fastcgi_pass</code>可能会吧URL转发到一个.scok文件上。
- <code>fastcgi_index</code>：FastCGI默认的主页资源。
- <code>fastcgi_param</code>：传递给FastCGI服务器的参数。
- <code>include</code>：把一个文件包含到配置文件中来。</p>
<h3 id="_3">代理</h3>
<pre><code class="language-nginx">    # 例1：第一个server是第二个server的代理
    server {
        location /proxy {
           proxy_pass   http://localhost:8080/;
        }
    }
    server {
        listen 8080;
        root html2;

        location / {
        }
    }

    # 例2
    location /some/path/ {
        proxy_pass http://www.example.com/link/;
    }
</code></pre>
<p>例2中新URL后面带了个请求路径，这种情况下原始请求匹配location参数的部分不会被带入新URL，例如，请求“/some/path/page.html”会被转发到“http://www.example.com/link/page.html”。</p>
<p>把http请求转发给非http server有以下几种命令：</p>
<ul>
<li>fastcgi_pass</li>
<li>uwsgi_pass</li>
<li>scgi_pass</li>
<li>memcached_pass</li>
</ul>
<p>转发请求时如何转发请求头：</p>
<ul>
<li>nginx转发时默认重写两个请求头字段，HOST字段默认设置为<code>proxy_host</code>变量的值，Connection字段默认设置为close。</li>
<li>
<p>使用<code>proxy_set_header</code>命令设置头字段</p>
<p><code>nginx
location /some/path/ {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_pass http://localhost:8000;
}</code></p>
</li>
<li>
<p>nginx转发请求时会去掉值为空的头字段，因此如果不想转发某个头字段，把该字段的值设置为空字符串，例如<code>proxy_set_header Accept-Encoding "";</code>。</p>
</li>
</ul>
<h3 id="fastcgi">FastCGI代理</h3>
<p>fastcgi_param命令指定了传递给fastcgi服务器的参数，例如<code>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</code>这条命令将参数<code>SCRIPT_FILENAME</code>传递给fastcgi服务器，参数的值为<code>$document_root$fastcgi_script_name</code>。</p>
<pre><code class="language-nginx">server {
    location / {
        fastcgi_pass  localhost:9000;
        # 脚本名
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        # 请求参数
        fastcgi_param QUERY_STRING    $query_string;
    }
}
</code></pre>
<h3 id="error_page">error_page</h3>
<p>指定错误页，格式：<code>error_page 错误码 uri</code></p>
<pre><code class="language-nginx">error_page 404 /404.html;
</code></pre>
<p>替换错误码，格式：<code>error_page 错误码 =新错误码 [参数]</code></p>
<pre><code class="language-nginx">location /old/path.html {
    error_page 404 =301 http:/example.com/new/path.html;
}
</code></pre>
<p>如果只写了<code>=</code>，没有写新的错误码，返回重定向后的uri返回的错误码</p>
<pre><code class="language-nginx">server {
    ...
    location /images/ {
        # Set the root directory to search for the file
        root /data/www;

        # Disable logging of errors related to file existence
        # 发生和文件存在相关的错误时，不写日志
        open_file_cache_errors off;

        # Make an internal redirect if the file is not found
        error_page 404 = /fetch$uri;
    }

    location /fetch/ {
        proxy_pass http://backend/;
    }
}
</code></pre>
<h3 id="_4">服务静态内容</h3>
<ul>
<li><code>root</code>可以放到<code>http{}</code>、<code>server{}</code>和<code>location{}</code>里。</li>
<li>
<p>对于<strong>以斜杠结尾的请求（请求的是一个目录，而不是文件）</strong>，nginx默认会到对应目录下去找index.html，如果没有就返回404；<code>autoindex</code>命令会让nginx返回一个目录页面，列出请求目录下的文件；<code>index</code>命令可以指定多个index页面，nginx返回找到的第一个页面。</p>
<p>```nginx
location /images/ {
    autoindex on;
}</p>
<p>location / {
    index index.$geo.html index.htm index.html;
}
```</p>
</li>
<li>
<p>try_files<br />
检查指定的文件或目录是否存在（try_files后面跟着的几个uri），如果不存在，返回最后一个uri指向的文件（也有可能不是uri，是一个返回码或者location等等）；（<strong>优先于autoindex</strong>）</p>
<p>```nginx
server {
    root /www/data;</p>
<pre><code>location /images/ {
    try_files $uri /images/default.gif;
}
</code></pre>
<p>}</p>
<h1 id="_5">可以返回状态码</h1>
<p>location / {
    try_files $uri $uri/ $uri.html =404;
}</p>
<h1 id="_6">可以转发请求</h1>
<p>location / {
    try_files $uri $uri/ @backend;
}
location @backend {
    proxy_pass http://backend.example.com;
}
```</p>
</li>
<li>
<p>性能优化</p>
</li>
<li>sendfile、tcp_nopush、tcp_nodealy</li>
<li>优化请求队列（backlog queue）</li>
</ul>
<h3 id="buffer">buffer</h3>
<p>nginx buffer会暂存后端服务器没发送完的响应，知道nginx完整接收了整个响应，才会把这个响应发送给客户端。好处是如果客户端是以同步方式接受响应，buffer会节省后端服务器的时间，坏处是nginx必须一直缓存整个响应，直到客户端接收完毕。</p>
<p>相关的命令：</p>
<ul>
<li>proxy_buffers</li>
<li>proxy_buffer_size</li>
<li>proxy_buffering</li>
</ul>
<h3 id="ip">绑定ip</h3>
<p>如果服务器上有多个ip，可以使用<code>proxy_bind</code>命令将请求通过指定ip转发，例如：</p>
<pre><code class="language-nginx">location /app1/ {
    proxy_bind 127.0.0.1;
    proxy_pass http://example.com/app1/;
}
</code></pre>
<h3 id="_7">压缩和解压</h3>
<ul>
<li>以下这些压缩和解压指令可以放到<code>http{}</code>、<code>server{}</code>和<code>location{}</code>里。</li>
<li>
<p>对于一个已经压缩过的响应，nginx不会二次压缩（比如一个来自后端服务器的响应）。</p>
<p><code>nginx
gzip on;</code></p>
</li>
<li>
<p>nginx默认只会对text/html类型做压缩，使用<code>gzip_types</code>指令对其它类型的数据做压缩</p>
<p><code>nginx
gzip_types text/plain application/xml;</code></p>
</li>
<li>
<p><code>gzip_min_length 1000;</code>，设置压缩的最小长度，默认是20个字节。</p>
</li>
<li><code>gzip_proxied</code>指令用于对后端服务器收到的响应做压缩（即请求是后端服务器发出的）</li>
<li>解压指令<code>gunzip on;</code></li>
<li><code>gzip_static</code>，nginx会自动返回文件的压缩版。例如，目录下有一个名为test.txt.gz的文件，如果配置了<code>gzip_static on</code>，用户访问test.txt的时候gzip会返回test.txt.gz这个文件，浏览器收到这个文件后会将其解压并打印到屏幕上。（而并不是让浏览器下载这个文件）</li>
</ul>
<h2 id="_8">负载均衡</h2>
<h3 id="http">http负载均衡</h3>
<pre><code class="language-nginx">http {
    upstream backend {  # backend是一个负载均衡组
        [负载均衡方法]
        server backend1.example.com weight=5;
        server backend2.example.com;
        server 192.0.0.1 backup;
    }
    server {
        location / {
            proxy_pass http://backend;  # 把请求路由到这个负载均衡组去
        }
    }
}
</code></pre>
<p>有四种负载均衡方法：</p>
<ul>
<li>轮巡（Round Robin）：默认就是这种方法。会考虑server权重（weight）。</li>
<li>最少连接数（least_conn）：每次把请求转发给连接数最少的server，同时也考虑权重。</li>
<li>ip_hash：对IPv4地址的前三个字节或者整个IPv6地址进行hash，确保地址相同的请求能被相同server处理。</li>
<li>通用hash（hash 用户自定义key [consistent]）：用户可以自定义key，并且有一个一致性hash的可选项。</li>
</ul>
<p>server后面还可以跟一些选项：</p>
<ul>
<li>weight：server的权重，默认是1。</li>
<li>backup：正常不会服务，只有其他server不可用了才会把请求发送到这个server上。</li>
<li>down：暂时移除这个server，但是ip_hash还是能映射到这个server上，只不过由排在他后面的server来服务。</li>
</ul>
<p>nginx还能实时地检查upstream组内server的状态是否正常。在server后面加上max_fails和fail_timeout选项，fail_timeout是一个时间值，表示server在这个时间内失败一定次数就会被标记为不可用，max_fails规定了失败的次数。</p>
<p>zone指令：如果一个负载均衡组里有zone指令，那么这个组的配置和状态就会被所有worker进程共享。</p>
<p>可以用resolver指令实现负载均衡组的域名解析（DNS），（这个属于Nginx Plus的功能）</p>
<h2 id="_9">安全控制</h2>
<h3 id="https">https</h3>
<pre><code class="language-nginx">http {
    # 性能优化
    ssl_session_cache   shared:SSL:10m;
    ssl_session_timeout 10m;
    server {
        listen              80; #一个Server能同时进行HTTP和HTTPS服务
        listen              443 ssl;
        server_name         www.example.com;
        ssl_certificate     www.example.com.crt; # 证书（全链证书）
        ssl_certificate_key www.example.com.key; # 私钥
        # 协议和密文
        ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers         HIGH:!aNULL:!MD5;
        # OCSP
        ssl_verify_client       on;
        ssl_trusted_certificate /etc/ssl/cachain.pem; # CA证书
        ssl_ocsp                on; # Enable OCSP validation

        ssl_ocsp_responder http://ocsp.example.com/; # 可选，手动指定ocsp请求地址
        ssl_ocsp_cache shared:one:10m; # 缓存ocsp请求结果

        # 性能优化

        #...
    }
}
</code></pre>
<ul>
<li>先建立SSL连接，然后才发送HTTP请求，因此nginx建立SSL连接的时候并不直到客户端要访问哪个服务。</li>
<li>ocsp请求的结果可以通过变量<code>$ssl_client_verify</code>获得。</li>
<li>制作证书链：<code>$ cat www.example.com.crt bundle.crt &gt; www.example.com.chained.crt</code>，把客户证书和中间证书拼到一起。</li>
<li>使用命令<code>$ openssl s_client -connect www.godaddy.com:443</code>验证服务是否能返回证书链。</li>
</ul>
<h3 id="tcpssl">TCP流量也可以配置ssl代理</h3>
<h3 id="http_1">使用HTTP基本认证做访问控制</h3>
<ul>
<li>三种认证方式：用户名-密码、IP地址、地理位置</li>
<li>用户名-密码认证需要一个密码文件，密码文件使用工具生成，apache2-utils (Debian, Ubuntu) 或 httpd-tools (RHEL/CentOS/Oracle Linux)；</li>
<li><code>yum install -y httpd-tools</code></li>
<li><code>sudo htpasswd -c 密码文件名 用户名</code>，<code>-c</code>表示创建该文件，可以向这个文件中追加多个用户名和密码。这个文件可以直接用<code>cat</code>打印</li>
</ul>
<p>以下是<strong>用户名-密码认证</strong>的两个例子，分别打开和关闭用户认证</p>
<pre><code class="language-nginx">location /api {
    auth_basic           “Administrator’s Area”;
    auth_basic_user_file /etc/apache2/.htpasswd; 
}
</code></pre>
<pre><code class="language-nginx">server {
    ...
    auth_basic           &quot;Administrator’s Area&quot;;
    auth_basic_user_file conf/htpasswd;

    location /public/ {
        auth_basic off;
    }
}
</code></pre>
<p>以下是<strong>IP地址认证</strong>的两个例子：</p>
<pre><code class="language-nginx">location /api {
    #...
    deny  192.168.1.2;
    allow 192.168.1.1/24;
    allow 127.0.0.1;
    deny  all;
}
</code></pre>
<p>用<code>deny</code>和<code>allow</code>指令限制访问，nginx按<code>deny</code>和<code>allow</code>定义的顺序检查客户端的权限。</p>
<pre><code class="language-nginx">location /api {
    #...
    satisfy all;    

    deny  192.168.1.2;
    allow 192.168.1.1/24;
    allow 127.0.0.1;
    deny  all;

    auth_basic           &quot;Administrator’s Area&quot;;
    auth_basic_user_file conf/htpasswd;
}
</code></pre>
<p><code>satisfy all</code>表示客户端必须满足定义的所有条件，<code>satisfy any</code>表示满足任意一个条件即可。</p>
<h3 id="nginx_2">nginx访问控制接口</h3>
<p>要想使用这个功能，编译nginx时必须加上<code>--with-http_auth_request_module</code>选项。</p>
<p>这个功能的用法是这样的，用户向后端服务发起请求时，nginx会首先向用户自定义的访问控制服务（例如LDAP、OAuth等）发一个子请求，如果访问控制服务返回2xx，nginx会放行用户的请求，如果访问控制服务返回401或者403，nginx会拦截用户请求并返回401或403。</p>
<p>Nginx有对JWT的支持，JWT（Json Web Token）是一套信息传输协议，OAuth2和OpenID的身份验证功能可以使用JWT实现。</p>
<h3 id="_10">对访问进行限制</h3>
<ul>
<li>限制http访问<br />
  可以限制访问的连接数、频率、带宽等</li>
<li>限制TCP访问<br />
  可以限制IP和带宽等。</li>
<li>按地理位置限制访问</li>
</ul>
<h3 id="sslhttptcp">和后端服务建立ssl连接（包括http和tcp流量）</h3>
<h3 id="ip_1">IP地址的动态黑名单</h3>
<h2 id="_11">监控和日志</h2>
<ul>
<li>配置日志：参考<a href="https://docs.nginx.com/nginx/admin-guide/monitoring/logging/">https://docs.nginx.com/nginx/admin-guide/monitoring/logging/</a>以及<a href="http://nginx.org/en/docs/syslog.html">http://nginx.org/en/docs/syslog.html</a></li>
</ul>
<h2 id="_12">代理服务器</h2>
<p>代理服务器使用<code>proxy_set_header</code>命令对请求头中的字段重新赋值或者在请求头中追加新的字段。
使用<code>proxy_set_body</code>命令对请求体进行操作。</p>
<p>格式：<code>proxy_set_header Host $proxy_host;</code></p>
<h3 id="serverip">如何让后端server得到真正的客户端ip（当存在多层代理或负载均衡时）</h3>
<ul>
<li>nginx版本必须大于1.13.11</li>
<li>编译前，在configure的选项中加上<code>-- with-http_realip_module</code>和<code>-- with-stream_realip_module</code>选项。</li>
</ul>
<p>主要涉及到两个选项：</p>
<ul>
<li>set_real_ip_from：可信的上游ip，nginx会把这里的ip视为代理服务器</li>
<li>real_ip_header：请求头中使用的代理协议，常见的有‘X-Forwarded-For’、‘proxy_protocol’等。</li>
</ul>
<p>配置好以后，<code>$remote_addr</code>和<code>$remote_port</code>变量里保存的是客户端ip，<code>$realip_remote_addr</code>和<code>$realip_remote_port</code>变量中保存的是上游代理的ip。</p>
<h3 id="_13">关于代理协议</h3>
<ul>
<li>X-Forwarded-For<br />
  X-Forwarded-For是一个http头扩展字段，HTTP/1.1（RFC 2616）协议并没有对它的定义，它最开始是由 Squid 这个缓存代理软件引入，用来表示 HTTP 请求端真实 IP。如今它已经成为事实上的标准，被各大 HTTP 代理、负载均衡等转发服务广泛使用，并被写入 RFC 7239（Forwarded HTTP Extension）标准之中。<br />
  X-Forwarded-For 请求头格式非常简单，就这样：
  <code>X-Forwarded-For: client, proxy1, proxy2</code><br />
可以看到，XFF 的内容由「英文逗号 + 空格」隔开的多个部分组成，最开始的是离服务端最远的IP，然后是每一级代理的IP。</li>
<li>X-Real-IP<br />
  X-Real-IP也是一个http头扩展字段，但没有进入正式的标准。通常X-Real-IP只保存上一跳的IP，因此通常只会在某一级代理设置一下这个字段（否则这个字段会被覆盖好几次）</li>
<li>proxy protocol<br />
  proxy protocol，是haproxy的作者Willy Tarreau于2010年开发和设计的一个Internet协议，通过为tcp添加一个很小的头信息，来方便的传递客户端信息（协议栈、源IP、目的IP、源端口、目的端口等)，在网络情况复杂又需要获取客户IP时非常有用。</li>
<li>多层NAT网络</li>
<li>TCP代理（四层）或多层tcp代理</li>
<li>https反向代理http(某些情况下由于Keep-alive导致不是每次请求都传递x-forword-for)<br />
  proxy protocol有两个版本，v1仅支持human-readable报头格式（ASCIII码），v2需同时支持human-readable和二进制格式（即需要兼容v1格式）。</li>
</ul>
<h2 id="nginx_3">nginx变量</h2>
<p>nginx的内置变量都是模块自带的。大部分变量在ngx_http_core_module这个模块中。<br />
各模块在它们各自的<a href="http://nginx.org/en/docs/">nginx.org</a>文档最后面附加了该模块的变量定义。</p>
<p>还可以自定义变量，使用<a href="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html?&amp;_ga=2.13505527.1914378712.1606226396-1825618331.1601462528#set">set</a>、<a href="https://nginx.org/en/docs/http/ngx_http_map_module.html?&amp;_ga=2.13505527.1914378712.1606226396-1825618331.1601462528#map">map</a>和<a href="https://nginx.org/en/docs/http/ngx_http_geo_module.html?&amp;_ga=2.13505527.1914378712.1606226396-1825618331.1601462528#geo">geo</a></p>
<ul>
<li>remote_addr：请求方IP</li>
<li>local_time：服务器本地时间，日期+时间+时区</li>
<li>request：请求方法（GET/POST...）+请求路径+HTTP协议</li>
<li>body_bytes_sent：响应体的字节数</li>
<li>status：响应码</li>
<li>http_user_agent：用户使用的客户端，一般是浏览器</li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ©2020-2025 shiwj | 津ICP备2020010292号-1
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>